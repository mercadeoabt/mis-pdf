<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PDFs de mercadeoabt</title>
  <style>
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#f7f7f8;color:#111}
    .wrap{max-width:840px;margin:48px auto;padding:0 20px}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:16px;padding:24px;box-shadow:0 2px 10px rgba(0,0,0,.03)}
    h1{margin:0 0 8px;font-size:28px}
    p{color:#555;margin:0 0 20px}
    ul{list-style:none;padding:0;margin:0}
    li{border-top:1px solid #e5e7eb}
    li:first-child{border-top:0}
    a{display:flex;justify-content:space-between;align-items:center;gap:12px;padding:14px 0;text-decoration:none;color:#0a58ca;word-break:break-word}
    .empty{color:#555}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>üìÇ PDFs de mercadeoabt</h1>
      <p>Listado autom√°tico sin Jekyll.</p>
      <ul id="listado"></ul>
      <p class="empty" id="vacio" style="display:none;">(A√∫n no hay PDFs p√∫blicos en este repositorio)</p>
    </div>
  </div>

  <script>
    (async () => {
      const owner = "mercadeoabt";
      const repo  = "mis-pdf";
      const branch = "main";
      const api = `https://api.github.com/repos/${owner}/${repo}/git/trees/${branch}?recursive=1`;

      try {
        const res = await fetch(api);
        const data = await res.json();
        const tree = Array.isArray(data.tree) ? data.tree : [];
        const pdfs = tree
          .filter(n => n.type === "blob" && /\.pdf$/i.test(n.path))
          .sort((a,b) => a.path.localeCompare(b.path));

        const ul = document.getElementById("listado");
        const empty = document.getElementById("vacio");
        if (pdfs.length === 0) { empty.style.display = "block"; return; }

        const base = location.origin + location.pathname; // https://mercadeoabt.github.io/mis-pdf/
        for (const f of pdfs) {
          const li = document.createElement("li");
          const a  = document.createElement("a");
          a.href   = base + encodeURI(f.path);
          a.target = "_blank";
          a.rel    = "noopener";
          // Nombre ‚Äúbonito‚Äù
          a.textContent = f.path.split("/").pop()
            .replace(/\.pdf$/i,"")
            .replace(/[_-]+/g," ");
          li.appendChild(a);
          ul.appendChild(li);
        }
      } catch (e) {
        document.getElementById("vacio").textContent = "No se pudo cargar la lista (API rate limit o repo privado).";
        document.getElementById("vacio").style.display = "block";
      }
    })();
  </script>
</body>
</html>
