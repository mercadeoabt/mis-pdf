<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PDFs de Mercadeo ABT</title>
  <style>
    :root {
      --bg:#f7f7f8; --fg:#111; --muted:#555; --card:#fff; --border:#e5e7eb; --brand:#0a58ca;
    }
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .wrap{max-width:840px;margin:48px auto;padding:0 20px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:24px;box-shadow:0 2px 10px rgba(0,0,0,.03)}
    header{display:flex;align-items:center;gap:14px;margin-bottom:10px}
    .brand{height:52px; width:auto; display:block} /* Ajusta la altura del logo aquí */
    h1{margin:0;font-size:28px}
    p{color:var(--muted);margin:6px 0 18px}
    ul{list-style:none;padding:0;margin:0}
    li{border-top:1px solid var(--border)}
    li:first-child{border-top:0}
    a{display:flex;justify-content:space-between;align-items:center;gap:12px;padding:14px 0;text-decoration:none;color:var(--brand);word-break:break-word}
    .empty{color:var(--muted)}
    @media (prefers-color-scheme: dark){
      :root{--bg:#0b0b0c;--fg:#f2f2f2;--muted:#b6b6b6;--card:#121214;--border:#26262a}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <header>
        <!-- Cambia "logo.png" por el nombre/ruta real de tu archivo si lo pusiste en /assets o similar -->
        <img src="logo.png" alt="mercadeoabt" class="brand" />
        <h1>PDFs de Mercadeo ABT</h1>
      </header>
      <p>Listado automático.</p>

      <ul id="listado"></ul>
      <p class="empty" id="vacio" style="display:none;">(Aún no hay PDFs públicos en este repositorio)</p>
    </div>
  </div>

  <script>
    (async () => {
      const owner = "mercadeoabt";
      const repo  = "mis-pdf";
      const branch = "main";
      const api = `https://api.github.com/repos/${owner}/${repo}/git/trees/${branch}?recursive=1`;

      try {
        const res = await fetch(api);
        const data = await res.json();
        const tree = Array.isArray(data.tree) ? data.tree : [];
        const pdfs = tree
          .filter(n => n.type === "blob" && /\.pdf$/i.test(n.path))
          .sort((a,b) => a.path.localeCompare(b.path));

        const ul = document.getElementById("listado");
        const empty = document.getElementById("vacio");
        if (pdfs.length === 0) { empty.style.display = "block"; return; }

        const base = location.origin + location.pathname; // https://mercadeoabt.github.io/mis-pdf/
        for (const f of pdfs) {
          const li = document.createElement("li");
          const a  = document.createElement("a");
          a.href   = base + encodeURI(f.path);
          a.target = "_blank";
          a.rel    = "noopener";
          a.textContent = f.path.split("/").pop()
            .replace(/\.pdf$/i,"")
            .replace(/[_-]+/g," ");
          li.appendChild(a);
          ul.appendChild(li);
        }
      } catch (e) {
        const empty = document.getElementById("vacio");
        empty.textContent = "No se pudo cargar la lista (API rate limit o repo privado).";
        empty.style.display = "block";
      }
    })();
  </script>
</body>
</html>
